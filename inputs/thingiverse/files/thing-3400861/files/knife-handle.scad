// Full handle width, blade + both scales, mm
HANDLE_THICKNESS = 14.2;

// Height of knurled nut, mm
KNURL_HEIGHT = 5;

/* [Hidden] */

// chamfer height
ch = 4.2;
BLADE_THICKNESS = 3.5;
$fn=90;
h = (HANDLE_THICKNESS - BLADE_THICKNESS) / 2 - ch;
bh = (KNURL_HEIGHT - BLADE_THICKNESS) / 2;
translate([-52, -12, 0]) handle();
translate([-52, 12, 0]) mirror([0, 1, 0]) {
	handle();
}

module handle() {
	zz = h - (h+ch/2 - 2.6);
	difference() {
	fillet();
	translate([-55, -2.5, h+ch+18.2]) rotate([-1, 89.3, 0]) cylinder(d=38, h=90);
	chamfer(-44.29, 1.777, h+ch/2, 5.2);
	translate([-44.29, 1.777, -1]) cylinder(d=5.2, h=h+ch+2);
	chamfer(-33.78, -11.26, h+ch/2, 5.2);
	translate([-33.78, -11.26, -1]) cylinder(d=5.2, h=h+ch+2);
	translate([-29, -2.2, h+ch-3.4]) cylinder(d=5.6, h=10);
	translate([-29, -2.2, h+ch-3.4]) cylinder(d=5.6, h=3);
	translate([-29, -2.2, -1]) cylinder(d=5.6, h=bh+1.1);
	translate([-29, -2.2, bh+.3]) cylinder(d=3.2, h=10);
	translate([33.5, -3.15, h+ch-3.0]) cylinder(d=5.6, h=10);
	translate([33.5, -3.15, -1]) cylinder(d=5.6, h=bh+1.1);
	translate([33.5, -3.15, bh+.3]) cylinder(d=3.2, h=10);
	}
}

module chamfer(x, y, z, d) {
	translate([x, y, z])
	cylinder(d1 = d, d2 = d+7, h=ch);
}

module fillet() {
	sc = [.99, .91];
	a2 = ch/3;
	a1 = ch - a2;
	union() {
		linear_extrude(height=h, convexity=10) shape();
		translate([0, 0, h])
		linear_extrude(height=a1, scale=sc, convexity=10) shape();
		translate([0, 0, h+a1])
		linear_extrude(height=a2, scale=[.98, .8], convexity=10) scale(sc) shape();
	}
}

module shape() {
	translate([40, -12]) scale([1, .995]) polygon(points = shapePoints, convexity=10);
}

shapePoints = [
	[2.106911, -10.49782],
	[0.947201, -8.434299],
	[-0.496173, -6.558208],
	[-2.193433, -4.908251],
	[-4.109563, -3.51847],
	[-6.205033, -2.417536],
	[-8.436611, -1.628163],
	[-10.75826, -1.166637],
	[-13.12208, -1.042478],
	[-15.4793, -1.258248],
	[-17.78129, -1.809497],
	[-19.98056, -2.68485],
	[-21.50094, -3.002483],
	[-23.05403, -2.984215],
	[-24.56651, -2.630906],
	[-27.44633, -1.390109],
	[-30.45769, -0.515647],
	[-33.55418, -0.020995],
	[-36.6881, 0.086227],
	[-39.81116, -0.195634],
	[-42.87524, -0.862235],
	[-44.06583, -0.956748],
	[-45.25724, -0.873184],
	[-46.42298, -0.6134],
	[-46.71896, -0.411004],
	[-46.96743, -0.152492],
	[-47.37883, 0.460169],
	[-47.66541, 0.709325],
	[-48.00201, 0.885107],
	[-48.37025, 0.977901],
	[-48.74996, 0.982631],
	[-49.12039, 0.89904],	
	[-49.46128, 0.731699],
	[-49.75397, 0.489761],
	[-50.50119, 0.299692],	
	[-51.27165, 0.270382],
	[-52.03115, 0.403134],
	[-52.74598, 0.692054],
	[-52.9464, 0.894098],
	[-53.18852, 1.043662],
	[-53.4589, 1.13245],
	[-53.74256, 1.155537],
	[-54.02374, 1.111642],
	[-54.28686, 1.0032],
	[-54.51732, 0.836227],
	[-54.70233, 0.619984],
	[-54.83164, 0.366467],
	[-54.89806, 0.089739],
	[-55.63, -0.051907],
	[-56.37547, -0.044006],
	[-57.10423, 0.113122],
	[-57.25626, 0.357166],
	[-57.46036, 0.559692],
	[-57.70557, 0.709837],
	[-57.97874, 0.799547],
	[-58.26522, 0.824011],
	[-58.54965, 0.781917],
	[-58.81676, 0.675522],
	[-59.05224, 0.510533],
	[-59.24345, 0.2958],
	[-59.38013, 0.04284],
	[-59.45496, -0.234778],
	[-59.82624, -0.560181],
	[-60.26028, -0.795457],
	[-60.73558, -0.928967],
	[-61.22864, -0.954104],
	[-61.71506, -0.869625],
	[-62.17077, -0.679709],
	[-62.47119, -0.509422],
	[-62.8021, -0.41066],
	[-63.14671, -0.38843],
	[-63.48757, -0.443857],
	[-63.80738, -0.574133],
	[-64.08994, -0.772654],
	[-64.32094, -1.029356],
	[-64.48865, -1.331228],
	[-64.58457, -1.662968],
	[-64.8419, -1.973215],
	[-65.15948, -2.221457],
	[-65.52267, -2.396278],
	[-65.91479, -2.489636],
	[-66.3178, -2.497238],	
	[-66.71317, -2.418734],
	[-67.0827, -2.257735],
	[-67.34612, -2.124513],
	[-67.63367, -2.057757],
	[-67.92886, -2.061297],
	[-68.21473, -2.13493],
	[-68.47488, -2.274431],
	[-68.6944, -2.471797],
	[-68.8607, -2.715704],
	[-68.96422, -2.992159],
	[-68.99902, -3.2853],
	[-69.20782, -3.822625],
	[-69.52959, -4.300935],	
	[-69.94861, -4.696848],
	[-70.44437, -4.99101],
	[-73.14462, -6.476898],
	[-73.60204, -6.738862],
	[-74.10566, -6.894518],
	[-74.63113, -6.936341],
	[-75.15302, -6.862307],
	[-75.64613, -6.675997],
	[-76.08659, -6.386419],
	[-89.15119, 11.06368],
	[-89.65613, 12.06394],
	[-89.9334, 13.14957],
	[-89.96992, 14.26946],
	[-89.76398, 15.37085],
	[-89.3253, 16.40189],
	[-88.5699, 17.65825],
	[-87.58173, 18.74111],	
	[-86.39954, 19.608],
	[-85.06969, 20.22494],
	[-83.64436, 20.56771],
	[-72.25465, 21.30127],
	[-60.84882, 21.7143],
	[-49.43588, 21.80647],
	[-38.02486, 21.5777],
	[-25.81698, 21.1008],	
	[-13.61396, 20.51244],
	[-1.416821, 19.81267],
	[-1.022418, 19.52147],
	[-0.683403, 19.16731],
	[-0.409692, 18.76057],
	[-0.203557, 18.61222],
	[0.029887, 18.51219],
	[0.279486, 18.46528],
	[0.533315, 18.47372],
	[0.779248, 18.53711],
	[1.005533, 18.65241],
	[1.20136, 18.81413],
	[1.357372, 19.01453],
	[1.697619, 19.27507],
	[2.089223, 19.44913],
	[2.51061, 19.52712],
	[2.93857, 19.50475],
	[3.349527, 19.38324],
	[3.720845, 19.16929],	
	[4.032069, 18.87469],
	[4.368093, 18.25261],
	[4.266055, 18.51567],
	[4.528667, 18.0206],
	[4.738923, 17.83245],
	[4.987263, 17.69851],
	[5.25999, 17.62619],
	[5.542064, 17.61947],
	[5.817927, 17.67871],
	[6.072365, 17.80067],
	[6.291345, 17.9786],
	[6.46279, 18.20269],
	[6.577243, 18.46059],
	[6.775096, 18.74865],
	[7.035858, 18.9813],
	[7.344525, 19.14516],	
	[7.683334, 19.2308],
	[8.03279, 19.23329],
	[8.372784, 19.15248],
	[8.68375, 18.99302],
	[8.947795, 18.7641],
	[9.149724, 18.47888],
	[9.277918, 18.15378],
	[9.325, 17.8075],
	[9.926334, 14.12398],
	[10.18149, 10.40044],
	[10.08824, 6.669322],
	[9.647401, 2.96317],
	[8.862813, -0.68571],
	[7.741318, -4.245506],
	[6.292693, -7.685185],
	[4.529567, -10.97476],
	[4.186646, -11.17611],
	[3.80549, -11.2895],
	[3.408271, -11.30834],
	[3.018094, -11.23153],
	[2.657656, -11.06354],
	[2.347923, -10.81413],
];

