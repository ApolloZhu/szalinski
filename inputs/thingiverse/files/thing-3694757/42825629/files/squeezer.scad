/*
* Toothpaste Dispenser Squeezer - https://www.thingiverse.com/thing:3694757
* by ASP3D - https://www.thingiverse.com/asp3d/about
* created 2019-06-16
* version v1.0
*
* Changelog
* --------------
* v1.0 - 2019-06-16:
* - [new] Initial release
* --------------
*
* This work is licensed under the Creative Commons - Attribution - Non-Commercial ShareAlike license.
* https://creativecommons.org/licenses/by-nc-sa/3.0/
*/


/* [Squeezer] */

// Hole width in millimeters
hole_width = 60; // [30:100]
// Hole height in millimeters
hole_height = 1; // [0.4:0.2:3]

// Squeezer thickness
width = 3; // [1:0.5:8]



/* [Hidden] */

size = 1.35 * hole_width;
height = 0.5 * size;
hole_scale = 1.5;







assembly();


module assembly() {
    difference() {
        lips_3d();
        hole_3d();
    }
}

module hole_3d() {
    translate([-hole_width/2, 0, -0.1])
        rotate([90, 0, 90])
            linear_extrude(hole_width)
                hole_shape();
}

module hole_shape() {
    x1 = hole_height/2;
    x2 = x1 + hole_scale;
    h1 = width + 0.2;
    polygon([ [-x1, 0], [-x1, h1/2], [-x2, h1], [x2, h1], [x1, h1/2], [x1, 0] ]);
}





module lips_3d() {
    resize([size, height, width])
    translate([-421/2, 384/2 + 30, 0])
    mirror([0, 1, 0])
    union()
    difference() {
        lips_main_3d();
        lips_holes_3d();
    }
}

module lips_main_3d() {
    linear_extrude(1)
        lips_main_shape();
}

module lips_holes_3d() {
    translate([0, 0, -1])
    linear_extrude(2)
        lips_holes_shape();
}

module lips_main_shape() {
    polygon([[155.5,110.31],[155.5,110.31],[151.55,110.306],[147.978,110.561],[141.5,111.9],[141.5,111.9],[138.737,112.812],[135.648,113.924],[130,116.19],[130,116.19],[127.354,117.482],[124.21,119.198],[118,123.01],[118,123.01],[114.682,125.503],[110.448,129.055],[101.42,137.44],[101.42,137.44],[96.833,142.252],[91.806,147.923],[82.86,159],[82.86,159],[78.981,164.326],[74.686,170.321],[66.94,181.38],[66.94,181.38],[63.618,186.005],[60.072,190.547],[54,197.3],[54,197.3],[51.393,199.464],[48.355,201.647],[42.5,205.05],[42.5,205.05],[40.031,206.152],[37.747,207.15],[34.75,208.38],[34.75,208.38],[34.182,208.937],[34.703,210.016],[39.75,214.69],[39.75,214.69],[42.75,217.299],[45.933,220.196],[51.33,225.44],[51.33,225.44],[53.662,227.995],[56.438,231.217],[61.93,238],[61.93,238],[65.142,242.374],[69.627,248.735],[80.04,264],[80.04,264],[85.188,271.658],[90.081,278.83],[96.89,288.5],[96.89,288.5],[99.237,291.536],[102.293,295.367],[108.95,303.45],[108.95,303.45],[112.551,307.511],[116.78,311.957],[125,319.85],[125,319.85],[128.775,323.05],[132.767,326.253],[139.5,331.18],[139.5,331.18],[142.343,332.88],[145.648,334.633],[152,337.48],[152,337.48],[155.191,338.587],[159.083,339.815],[167,342.03],[167,342.03],[171.469,342.94],[177.221,343.812],[190,345.1],[190,345.1],[197.506,345.447],[205.64,345.546],[223.5,345.01],[223.5,345.01],[232.027,344.436],[239.579,343.727],[250.5,342.04],[250.5,342.04],[254.079,341.126],[257.912,340.062],[264.5,338.01],[264.5,338.01],[267.184,336.992],[270.057,335.768],[275,333.31],[275,333.31],[277.262,331.89],[280.091,329.946],[286,325.51],[286,325.51],[289.108,322.906],[292.76,319.662],[299.88,312.9],[299.88,312.9],[303.313,309.316],[307.217,305.03],[314.51,296.5],[314.51,296.5],[318.335,291.506],[323.39,284.562],[334.55,268.5],[334.55,268.5],[340.061,260.373],[345.631,252.292],[354.35,240],[354.35,240],[357.731,235.662],[361.748,230.87],[369.68,222.25],[369.68,222.25],[373.247,218.821],[376.805,215.587],[382.25,211.16],[386.5,208.33],[383.5,207.61],[383.5,207.61],[381.901,207.067],[379.767,206.114],[375,203.51],[375,203.51],[372.461,201.776],[369.61,199.557],[364.37,194.81],[364.37,194.81],[361.643,191.683],[358.021,187.096],[349.97,176],[349.97,176],[345.856,170.09],[341.508,163.972],[334.18,154],[334.18,154],[330.933,149.987],[326.907,145.351],[318.57,136.5],[318.57,136.5],[314.607,132.717],[310.537,129.073],[303.99,123.86],[303.99,123.86],[301.345,122.189],[298.205,120.33],[292,116.95],[292,116.95],[288.966,115.532],[285.503,114.093],[279,111.83],[279,111.83],[275.985,111.122],[272.576,110.539],[266.25,110],[266.25,110],[263.283,110.139],[260.267,110.539],[254.75,112.01],[254.75,112.01],[252.237,113.18],[249.278,114.89],[243.5,119],[243.5,119],[240.737,121.295],[237.648,123.861],[232,128.55],[232,128.55],[229.472,130.531],[226.648,132.552],[221.5,135.76],[221.5,135.76],[218.819,137.022],[216.285,137.838],[210.5,138.41],[210.5,138.41],[207.379,138.276],[204.661,137.827],[199.25,135.7],[199.25,135.7],[196.677,134.203],[193.557,132.117],[187.25,127.29],[187.25,127.29],[184.393,124.855],[181.602,122.447],[177.5,118.82],[177.5,118.82],[175.901,117.53],[173.767,116.061],[169,113.31],[169,113.31],[165.935,111.951],[162.996,111.071],[155.5,110.31]]);
}

module lips_holes_shape() {
    polygon([[150.75,123.08],[150.75,123.08],[151.291,123.28],[151.588,124.006],[151.49,127.25],[151.49,127.25],[151.367,129.157],[151.421,131.206],[151.99,134.75],[153,138],[147.25,138.59],[147.25,138.59],[144.564,138.967],[141.5,139.566],[135.75,141.09],[135.75,141.09],[132.946,142.103],[129.561,143.451],[122.75,146.45],[122.75,146.45],[119.421,148.104],[115.721,150.055],[109,153.87],[109,153.87],[106.458,155.376],[104.338,156.548],[102.25,157.42],[102.25,157.42],[102.495,156.803],[103.353,155.433],[106.37,151.25],[106.37,151.25],[108.43,148.683],[110.813,145.942],[115.37,141.25],[115.37,141.25],[117.599,139.323],[120.255,137.221],[125.5,133.5],[125.5,133.5],[127.854,132.047],[130.195,130.687],[133.75,128.85],[133.75,128.85],[135.33,128.225],[137.602,127.372],[143,125.43],[143,125.43],[145.62,124.541],[147.955,123.801],[150.75,123.08]]);
    polygon([[116.75,280.26],[116.75,280.26],[117.927,280.812],[120.582,282.127],[128.75,286.26],[128.75,286.26],[133.848,288.737],[139.412,291.235],[149.25,295.13],[149.25,295.13],[154.277,296.686],[158.911,297.747],[169.75,298.88],[169.75,298.88],[174.126,299.12],[177.711,299.317],[181.03,299.5],[181.03,299.5],[180.881,299.854],[180.463,300.82],[179.08,304],[179.08,304],[178.253,306.282],[177.454,309.165],[176.31,315.26],[176.31,315.26],[175.914,317.885],[175.442,320.035],[174.5,322.02],[174.5,322.02],[173.322,321.739],[170.856,320.975],[163.5,318.46],[163.5,318.46],[158.917,316.7],[153.832,314.557],[144.63,310.19],[144.63,310.19],[140.745,307.968],[136.716,305.387],[130.13,300.42],[130.13,300.42],[127.66,298.022],[125.092,295.245],[120.88,289.92],[120.88,289.92],[119.425,287.638],[118.14,285.432],[116.63,282.25],[116.63,282.25],[116.443,281.396],[116.405,280.737],[116.75,280.26]]);
}
